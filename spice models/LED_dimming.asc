Version 4
SHEET 1 1728 1288
WIRE -64 -16 -64 -32
WIRE 80 -16 80 -32
WIRE 224 -16 224 -32
WIRE 832 64 784 64
WIRE 928 64 912 64
WIRE 1024 64 928 64
WIRE 1184 64 1104 64
WIRE -64 80 -64 64
WIRE 80 80 80 64
WIRE 224 80 224 64
WIRE 784 144 784 64
WIRE 928 240 928 64
WIRE 992 240 928 240
WIRE 1184 272 1184 64
WIRE 1184 272 1136 272
WIRE 1264 272 1184 272
WIRE 816 304 816 288
WIRE 992 304 816 304
WIRE 1024 400 1024 352
WIRE 832 496 752 496
WIRE 752 528 752 496
WIRE 832 528 832 496
WIRE 1264 624 1264 560
WIRE 752 656 752 608
WIRE 752 656 736 656
WIRE -48 688 -48 672
WIRE 752 720 752 656
WIRE 752 720 736 720
WIRE 1264 752 1264 704
WIRE 1264 752 1168 752
WIRE 1360 752 1264 752
WIRE -48 784 -48 768
WIRE 1264 784 1264 752
WIRE 736 816 736 720
WIRE 784 816 736 816
WIRE 672 848 672 832
WIRE 1008 848 928 848
WIRE 1008 864 1008 848
WIRE 1024 864 1008 864
WIRE 1216 864 1024 864
WIRE 784 880 736 880
WIRE 1360 880 1264 880
WIRE 1168 928 1168 752
WIRE 1264 928 1168 928
WIRE -48 944 -48 928
WIRE 1264 976 1264 928
WIRE 512 992 480 992
WIRE 672 992 672 928
WIRE 672 992 592 992
WIRE 688 992 672 992
WIRE 736 992 736 880
WIRE 736 992 688 992
WIRE 800 992 736 992
WIRE 1024 992 1024 864
WIRE 1024 992 880 992
WIRE 480 1024 480 992
WIRE -48 1040 -48 1024
WIRE 1216 1056 1136 1056
WIRE 1264 1088 1264 1072
WIRE 1360 1088 1360 880
WIRE 1360 1088 1264 1088
WIRE 1264 1120 1264 1088
FLAG 80 -32 3.3_REG
FLAG -64 80 0
FLAG -64 -32 12_REG
FLAG 80 80 0
FLAG 784 144 0
FLAG 224 80 0
FLAG 224 -32 ESP_PWM
FLAG 1264 272 DIM_PWM
FLAG 816 288 ESP_PWM
FLAG 928 64 REF
FLAG 1024 192 12_REG
FLAG 1024 400 0
FLAG 816 768 3.3_REG
FLAG 1008 864 OP_OUT
FLAG 480 1024 0
FLAG 816 928 0
FLAG 832 528 0
FLAG 672 832 3.3_REG
FLAG 1360 752 ENABLE_PULSE
FLAG 1264 560 3.3_REG
FLAG 1136 1056 DIGI_PIN
FLAG 688 992 DIV
FLAG 752 656 INPUT_TH
FLAG 1264 1120 0
FLAG -48 784 0
FLAG -48 672 IN
FLAG 656 656 IN
FLAG -48 1040 0
FLAG -48 928 DIGI_PIN
SYMBOL voltage 80 -32 R0
SYMATTR InstName V1
SYMATTR Value 3.3V
SYMBOL voltage -64 -32 R0
SYMATTR InstName V2
SYMATTR Value 12V
SYMBOL res 1120 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 6.81K
SYMBOL res 928 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 3.32K
SYMBOL voltage 224 -32 R0
SYMATTR InstName V3
SYMATTR Value PULSE(0 3.3 0 1u 1u .5m 1m)
SYMBOL Opamps/LT1783 1024 272 R0
SYMATTR InstName U3
SYMBOL res 896 976 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 3.3k
SYMBOL res 608 976 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res 688 944 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R5
SYMATTR Value 3.3k
SYMBOL res 752 640 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res 768 624 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R7
SYMATTR Value 3.3k
SYMBOL res 1280 720 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R8
SYMATTR Value 1K
SYMBOL nmos 1216 784 R0
SYMATTR InstName M1
SYMATTR Value BSB012NE2LX
SYMBOL nmos 1216 976 R0
SYMATTR InstName M2
SYMATTR Value BSB012NE2LX
SYMBOL Opamps/LT1783 816 848 R0
SYMATTR InstName U1
SYMBOL voltage -48 672 R0
SYMATTR InstName V4
SYMATTR Value PULSE(0 12 4m 10m 1m 5m 20m 3)
SYMBOL voltage -48 928 R0
SYMATTR InstName V5
SYMATTR Value PULSE(0 3.3 10m 0 0 10m 10 3)
TEXT -64 152 Left 2 !.tran 1u 80m
TEXT -88 192 Left 2 !* .step param R LIST 53K 80K 100K
TEXT -80 256 Left 2 ;LT1783 0-3.3V PWM to 0-10V PWM for LED dimming
